skill:
  id: knowledgebase-structured-extension-cn
  version: 1.0
  name: 扩展知识库支持结构化数据库接入
  description: >
    深入分析当前项目代码架构，扩展现有知识库形态，
    增加主流结构化数据库连接能力（MySQL、PostgreSQL、Oracle、SQL Server、ClickHouse等），
    将结构化数据库作为分析型数据源整合进知识库体系，
    生成完整的可行性技术方案文档至 docs 目录。

  目标:
    生成一份企业级《结构化数据库接入知识库扩展技术方案》，
    文档需具备架构分析、技术选型对比、优缺点分析、风险评估、演进路线等完整内容，
    可用于架构评审或技术委员会讨论。

  输入:
    - 当前项目源码
    - 现有知识库实现方式
    - 当前使用的数据库或存储方式
    - 若存在RAG或向量库，请分析其实现结构

  输出:
    - docs/structured-knowledgebase-extension.md

  强制要求:
    - 必须先分析现有架构再提出扩展方案
    - 必须提供多种技术选型对比
    - 必须分析优缺点
    - 必须给出推荐方案并说明理由
    - 必须包含阶段性实施路线
    - 必须包含风险分析
    - 必须考虑性能、扩展性、安全性、维护成本
    - 必须使用 Markdown 格式
    - 必须包含架构图（Mermaid 或 ASCII 图）

  必须包含章节:

    - 一、现有系统架构分析
    - 二、当前知识库能力边界与问题
    - 三、扩展目标与设计原则
    - 四、总体目标架构设计
    - 五、数据库连接层设计
    - 六、数据同步与抽取策略（全量 / 增量 / CDC）
    - 七、结构化索引与向量索引融合策略
    - 八、元数据注册与 Schema 管理机制
    - 九、查询与分析流程设计
    - 十、技术选型对比分析
    - 十一、性能与扩展性设计
    - 十二、安全与权限控制设计
    - 十三、风险评估
    - 十四、分阶段实施路线
    - 十五、未来演进方向

  技术选型必须覆盖:

    数据库类型:
      - MySQL
      - PostgreSQL
      - Oracle
      - SQL Server
      - ClickHouse
      - 云数据库RDS

    数据连接方式:
      - JDBC
      - ODBC
      - SQLAlchemy
      - Trino
      - Presto

    数据同步方式:
      - 全量抽取
      - 增量同步（基于时间戳或主键）
      - CDC（Debezium）

    索引方案:
      - Elasticsearch
      - OpenSearch
      - Milvus
      - Weaviate
      - ClickHouse
      - 混合检索（结构化 + 向量）

    调度与数据管道:
      - Airflow
      - Apache NiFi
      - Kafka（可选）

  架构设计必须包含:

    - 数据连接抽象层
    - 统一数据访问接口
    - 元数据注册服务
    - Schema 自动发现机制
    - 混合检索层
    - AI 查询编排层（如适用）

  评估维度:

    - 可扩展性
    - 性能
    - 运维复杂度
    - 成本
    - 与现有架构耦合度
    - 长期演进能力

  文档风格:

    语气: 企业级技术文档
    深度: 架构级深入分析
    面向人群:
      - 架构师
      - 后端高级工程师
      - AI基础设施工程师
      - CTO

  禁止:

    - 不允许给出泛泛而谈的建议
    - 不允许省略优缺点对比
    - 不允许只给单一技术方案
    - 不允许忽略风险评估
    - 不允许输出浅层说明文档

  成功标准: >
    输出的文档具备企业级技术深度，
    可以直接用于架构评审会议，
    并能指导实际开发实施。
